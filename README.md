# wiz-scenario-data-analyzer

AppleII版Wizardryのシナリオ情報を解析する。

## 使用法

本節では, 本ツールの使用手順を記載する。

### 事前準備

本節では, 本ツールを使用するために必要なpythonの実行環境に対する前提条件, および, 事前に用意するファイルについて述べる。

#### pythonの実行環境に対する前提条件

本ツールは, 以下のpython実行環境, および, ライブラリが導入されていることを前提とする。

- python-3.10以降
- svgwrite
- svglib
- rlPyCairo
- Pillow

python-3.10以降を導入後, `pip`コマンドを以下のように実行することで, 必要なライブラリを導入する。

```:shell
pip install -r requirements.txt
```

#### 事前に用意するファイル(シナリオ情報ファイルとメッセージ情報ファイル)

本ツールを使用するためには, Wizardryのシナリオ情報ファイルとメッセージ情報ファイルとが必要となる。

シナリオ情報ファイルとメッセージ情報ファイルは, AppleII版Wizardryのマスターディスク, または, デュプリケイトディスクのイメージファイルから抽出することで用意する。

`docs/HowToObtainScenarioData.md`の手順により, AppleII版Wizardryのマスターディスク, または, デュプリケイトディスクのイメージファイルからシナリオ情報ファイルとメッセージ情報ファイルを抽出することができる。

### 実行手順

`src`ディレクトリに格納されている`scenario.py`を以下のコマンドライン仕様に従って, 実行する([]内は省略可能)。

実行が完了すると, カレントディレクトリにシナリオ情報ファイル抽出した画像情報やマップ情報の画像ファイルが生成される。

また,  `-o`, `--outfile`オプションで指定されたファイルに解析結果レポートを出力する。
 `-o`, `--outfile`オプション未指定時は, 標準出力に, 解析結果レポートを出力する。

解析結果レポートは, Markdown形式で出力される。

```:shell
scenario.py [-h] [-v] [-d] [-o 出力先ファイル]
シナリオ情報ファイル メッセージ情報ファイル
```

以下のファイルへのパスを`シナリオ情報ファイル`, および, `メッセージ情報ファイル`位置引数に指定する。

|位置引数|ファイル|意味|
|---|---|---|
|第1位置引数|SCENARIO.DATA|シナリオ情報ファイル|
|第2位置引数|SCENARIO.MESGS|メッセージ情報ファイル|

他のオプションの意味は以下の通り:

|オプション|オプション(短縮形)|意味|
|---|---|---|
|--help|-h|ヘルプメッセージを表示する|
|--version|-v|バージョン情報を表示する|
|-debug|-d|デバッグモードで動作させる|
|--outfile ファイルパス文字列|-o ファイルパス文字列|出力ファイルへのパスを指定する(省略時は標準出力に表示される)|

### 実行例

本リポジトリを展開したディレクトリ下に, Wizardryのシナリオ情報ファイル(`SCENARIO.DATA`)とメッセージ情報ファイル(`SCENARIO.MESGS`)を事前に配置したうえで, 出力先ディレクトリ`output`を作成, `output`ディレクトリ中に`output.md`というファイル名で, 解析結果を出力する場合の実行例を以下に示す(`$`はプロンプトを表す)。

```:shell
$ mkdir output
$ cd output/
$ ../src/scenario.py ../SCENARIO.DATA ../SCENARIO.MESGS -o output.md
$
```
